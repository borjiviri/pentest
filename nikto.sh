#!/usr/bin/env bash

set -e

host="$1"
proxy=""
port=443
ssl="-ssl"
cmd="$(which nikto)"
output="nikto-${host}.log"

if [ -z "$1" ]; then echo "Usage: $0 <URL>"; exit 1; fi
if [ ! -z "$PROXY" ]; then proxy="${PROXY}"; fi

"$cmd" -host "$host" -port "$port" -output "$output" -Format xml "$ssl" \
    && printf "\e[32m[*]\e[0m ${cmd} finished\e[0m\n" \
    || printf "\e[31m[*]\e[0m ${cmd} failed\e[0m\n"

exit $?
